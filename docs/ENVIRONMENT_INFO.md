# ç’°å¢ƒæƒ…å ± - CICD-AKS-Technical Exercise

**ä½œæˆæ—¥**: 2025 å¹´ 10 æœˆ 29 æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025 å¹´ 10 æœˆ 29 æ—¥  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: CICD-AKS-Technical Exercise - Cloud Security Demo

---

## ğŸ“‹ ç›®æ¬¡

1. [Azure ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±](#azure-ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±)
2. [ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹æ¦‚è¦](#ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹æ¦‚è¦)
3. [ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ](#ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ)
4. [Kubernetes (AKS) ç’°å¢ƒ](#kubernetes-aks-ç’°å¢ƒ)
5. [MongoDB ä»®æƒ³ãƒã‚·ãƒ³](#mongodb-ä»®æƒ³ãƒã‚·ãƒ³)
6. [ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª (ACR)](#ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª-acr)
7. [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±](#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±)
8. [CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³](#cicd-ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³)
9. [ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±](#ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±)
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š)

---

## Azure ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±

### åŸºæœ¬æƒ…å ±

| é …ç›®                      | å€¤                                     |
| ------------------------- | -------------------------------------- |
| **ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å**  | Visual Studio Enterprise               |
| **ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ ID** | `832c4080-181c-476b-9db0-b3ce9596d40a` |
| **ãƒ†ãƒŠãƒ³ãƒˆ ID**           | `04879edd-d806-4f5d-86b8-d3a171c883fa` |
| **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**            | Japan East                             |
| **ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—**      | `rg-wiz-exercise-1`                    |

### ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
az account show
az group show --name rg-wiz-exercise-1
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹æ¦‚è¦

### ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§

| ãƒªã‚½ãƒ¼ã‚¹å                | ã‚¿ã‚¤ãƒ—             | ç”¨é€”                   | çŠ¶æ…‹       |
| ------------------------- | ------------------ | ---------------------- | ---------- |
| **aks-wiz-dev**           | AKS Cluster        | Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼  | âœ… Running |
| **acrwizdev**             | Container Registry | Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†    | âœ… Active  |
| **vm-mongo-dev**          | Virtual Machine    | MongoDB ã‚µãƒ¼ãƒãƒ¼       | âœ… Running |
| **vnet-wiz-dev**          | Virtual Network    | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŸºç›¤       | âœ… Active  |
| **log-wiz-dev**           | Log Analytics      | ç›£è¦–ãƒ»ãƒ­ã‚°åé›†         | âœ… Active  |
| **stwizdevdacheo6jrka7w** | Storage Account    | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | âœ… Active  |

### ãƒªã‚½ãƒ¼ã‚¹æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Azure Subscription                          â”‚
â”‚         (Visual Studio Enterprise)                       â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Resource Group: rg-wiz-exercise-1                 â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Virtual Network: vnet-wiz-dev           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Address Space: 10.0.0.0/16              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Subnet: snet-aks (10.0.1.0/24)  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                 â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ AKS Cluster              â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ aks-wiz-dev              â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ - 2 Nodes (Standard_DS2) â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ - Kubernetes 1.32        â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                          â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  [Guestbook App Pods]   â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  [NGINX Ingress]        â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Subnet: snet-vm (10.0.2.0/24)   â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                 â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ VM: vm-mongo-dev         â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ - Ubuntu 20.04 LTS       â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ - MongoDB 4.4            â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ - Public IP: 172.192.25.0â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ACR: acrwizdev.azurecr.io                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - SKU: Basic                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - Images: guestbook (v3, v4, SHA tags)   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Storage: stwizdevdacheo6jrka7w           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - MongoDB Backups                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - Public Access: Enabled (Vulnerable)    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Log Analytics: log-wiz-dev               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - Container Insights                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - Activity Logs                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External Access:
  â†’ http://20.18.117.80 (Ingress + Azure LB)
  â†’ ssh://172.192.25.0:22 (MongoDB VM - Vulnerable)
```

---

## ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ

### Virtual Network

| é …ç›®             | å€¤           |
| ---------------- | ------------ |
| **åå‰**         | vnet-wiz-dev |
| **ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“** | 10.0.0.0/16  |
| **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**   | Japan East   |

### ã‚µãƒ–ãƒãƒƒãƒˆæ§‹æˆ

| ã‚µãƒ–ãƒãƒƒãƒˆå | ã‚¢ãƒ‰ãƒ¬ã‚¹ç¯„å›² | ç”¨é€”       | æ¥ç¶šãƒªã‚½ãƒ¼ã‚¹              |
| ------------ | ------------ | ---------- | ------------------------- |
| **snet-aks** | 10.0.1.0/24  | AKS ãƒãƒ¼ãƒ‰ | AKS ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ (2 ãƒãƒ¼ãƒ‰) |
| **snet-vm**  | 10.0.2.0/24  | ä»®æƒ³ãƒã‚·ãƒ³ | MongoDB VM                |

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ— (NSG)

#### vm-mongo-dev-nsg

| ãƒ«ãƒ¼ãƒ«å | æ–¹å‘    | ãƒ—ãƒ­ãƒˆã‚³ãƒ« | ãƒãƒ¼ãƒˆ | ã‚½ãƒ¼ã‚¹      | å„ªå…ˆåº¦ | ç›®çš„                      |
| -------- | ------- | ---------- | ------ | ----------- | ------ | ------------------------- |
| SSH      | Inbound | TCP        | 22     | \*          | 300    | SSH ã‚¢ã‚¯ã‚»ã‚¹ (Vulnerable) |
| MongoDB  | Inbound | TCP        | 27017  | 10.0.0.0/16 | 310    | AKS ã‹ã‚‰ã® DB æ¥ç¶š        |

### ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP ã‚¢ãƒ‰ãƒ¬ã‚¹

| åå‰                         | IP ã‚¢ãƒ‰ãƒ¬ã‚¹  | ç”¨é€”                 |
| ---------------------------- | ------------ | -------------------- |
| **vm-mongo-dev-pip**         | 172.192.25.0 | MongoDB VM           |
| **ingress-nginx-controller** | 20.18.117.80 | Ingress LoadBalancer |

---

## Kubernetes (AKS) ç’°å¢ƒ

### ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æƒ…å ±

| é …ç›®                       | å€¤          |
| -------------------------- | ----------- |
| **ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å**           | aks-wiz-dev |
| **Kubernetes ãƒãƒ¼ã‚¸ãƒ§ãƒ³**  | 1.32.7      |
| **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**             | Japan East  |
| **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³** | Azure CNI   |
| **DNS ã‚µãƒ¼ãƒ“ã‚¹ IP**        | 10.1.0.10   |
| **ã‚µãƒ¼ãƒ“ã‚¹ CIDR**          | 10.1.0.0/16 |
| **SKU Tier**               | Free        |

### ãƒãƒ¼ãƒ‰ãƒ—ãƒ¼ãƒ«

| åå‰          | VM ã‚µã‚¤ã‚º       | ãƒãƒ¼ãƒ‰æ•° | OS                 | çŠ¶æ…‹     |
| ------------- | --------------- | -------- | ------------------ | -------- |
| **nodepool1** | Standard_DS2_v2 | 2        | Ubuntu 22.04.5 LTS | âœ… Ready |

**ãƒãƒ¼ãƒ‰è©³ç´°**:

```
Node 1: aks-nodepool1-28174749-vmss000000
  - Kubelet Version: v1.32.7
  - OS: Ubuntu 22.04.5 LTS
  - Status: Ready

Node 2: aks-nodepool1-28174749-vmss000001
  - Kubelet Version: v1.32.7
  - OS: Ubuntu 22.04.5 LTS
  - Status: Ready
```

### ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

#### Namespace: default

| ãƒªã‚½ãƒ¼ã‚¹       | åå‰              | ãƒ¬ãƒ—ãƒªã‚«  | ã‚¤ãƒ¡ãƒ¼ã‚¸                          | çŠ¶æ…‹       |
| -------------- | ----------------- | --------- | --------------------------------- | ---------- |
| **Deployment** | guestbook-app     | 2/2       | acrwizdev.azurecr.io/guestbook:v4 | âœ… Running |
| **Service**    | guestbook-service | ClusterIP | -                                 | âœ… Active  |
| **Ingress**    | guestbook-ingress | nginx     | -                                 | âœ… Active  |

#### Namespace: ingress-nginx

| ãƒªã‚½ãƒ¼ã‚¹       | åå‰                     | ã‚¿ã‚¤ãƒ—       | EXTERNAL-IP  | çŠ¶æ…‹       |
| -------------- | ------------------------ | ------------ | ------------ | ---------- |
| **Service**    | ingress-nginx-controller | LoadBalancer | 20.18.117.80 | âœ… Active  |
| **Deployment** | ingress-nginx-controller | 1/1          | -            | âœ… Running |

### Pod è©³ç´°

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³Pod
NAME                             READY   STATUS    RESTARTS   AGE
guestbook-app-5d497466c4-fhdtn   1/1     Running   0          45m
guestbook-app-5d497466c4-k48gv   1/1     Running   0          45m

# Ingress Controller Pod
NAME                                        READY   STATUS    AGE
ingress-nginx-controller-66cb9865b5-dbwbk   1/1     Running   48m
```

### kubectl ã‚³ãƒãƒ³ãƒ‰ä¾‹

```bash
# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ¥ç¶š
az aks get-credentials --resource-group rg-wiz-exercise-1 --name aks-wiz-dev

# Podç¢ºèª
kubectl get pods -l app=guestbook

# Serviceç¢ºèª
kubectl get svc

# Ingressç¢ºèª
kubectl get ingress

# ãƒ­ã‚°ç¢ºèª
kubectl logs -l app=guestbook --tail=50
```

---

## MongoDB ä»®æƒ³ãƒã‚·ãƒ³

### VM åŸºæœ¬æƒ…å ±

| é …ç›®                | å€¤                             |
| ------------------- | ------------------------------ |
| **VM å**           | vm-mongo-dev                   |
| **VM ã‚µã‚¤ã‚º**       | Standard_B2s (2 vCPU, 4GB RAM) |
| **OS**              | Ubuntu 20.04 LTS               |
| **ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP**   | 172.192.25.0                   |
| **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ IP** | 10.0.2.4                       |
| **ç®¡ç†ãƒãƒ¼ãƒˆ**      | SSH (22) - **Vulnerable**      |

### MongoDB è¨­å®š

| é …ç›®                   | å€¤                                      |
| ---------------------- | --------------------------------------- |
| **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**         | MongoDB 4.4 (1 å¹´ä»¥ä¸Šå¤ã„ - Vulnerable) |
| **ãƒãƒ¼ãƒˆ**             | 27017                                   |
| **èªè¨¼**               | æœ‰åŠ¹                                    |
| **ã‚¢ã‚¯ã‚»ã‚¹å…ƒ**         | Kubernetes ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (10.0.0.0/16)   |
| **ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª** | /var/lib/mongodb                        |
| **ãƒ­ã‚°**               | /var/log/mongodb/mongod.log             |

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š

- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å…ˆ**: Azure Storage Account (`stwizdevdacheo6jrka7w`)
- **é »åº¦**: ãƒ‡ã‚¤ãƒªãƒ¼
- **ä¿æŒæœŸé–“**: 7 æ—¥é–“
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: **Public Access æœ‰åŠ¹ (Vulnerable)**

### æ¥ç¶šæƒ…å ±

**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®æ¥ç¶š**:

```bash
MONGO_URI=mongodb://10.0.2.4:27017/guestbook
```

**VM ç®¡ç†ã‚¢ã‚¯ã‚»ã‚¹**:

```bash
# SSHæ¥ç¶š (Vulnerable - Public Access)
ssh azureuser@172.192.25.0

# MongoDBã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
sudo systemctl status mongod

# MongoDBæ¥ç¶šãƒ†ã‚¹ãƒˆ
mongo --host 10.0.2.4 --port 27017
```

### æ„å›³çš„ãªè„†å¼±æ€§ (ãƒ‡ãƒ¢ç”¨)

- âš ï¸ SSH ãƒãƒ¼ãƒˆãŒãƒ‘ãƒ–ãƒªãƒƒã‚¯ã«å…¬é–‹
- âš ï¸ éå‰°ãªã‚¯ãƒ©ã‚¦ãƒ‰æ¨©é™ (VM ä½œæˆå¯èƒ½)
- âš ï¸ 1 å¹´ä»¥ä¸Šå¤ã„ MongoDB ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- âš ï¸ 1 å¹´ä»¥ä¸Šå¤ã„ OS ãƒãƒ¼ã‚¸ãƒ§ãƒ³

---

## ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª (ACR)

### ACR åŸºæœ¬æƒ…å ±

| é …ç›®                      | å€¤                           |
| ------------------------- | ---------------------------- |
| **ãƒ¬ã‚¸ã‚¹ãƒˆãƒªå**          | acrwizdev                    |
| **Login Server**          | acrwizdev.azurecr.io         |
| **SKU**                   | Basic                        |
| **ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**      | ç„¡åŠ¹ (Managed Identity ä½¿ç”¨) |
| **Public Network Access** | æœ‰åŠ¹                         |

### ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§

| ãƒªãƒã‚¸ãƒˆãƒª    | ã‚¿ã‚°       | ãƒ“ãƒ«ãƒ‰æ—¥æ™‚ | ç”¨é€”                          |
| ------------- | ---------- | ---------- | ----------------------------- |
| **guestbook** | v3         | 2025-10-28 | åˆæœŸå‹•ä½œç¢ºèªç‰ˆ                |
| **guestbook** | v4         | 2025-10-28 | UI æ›´æ–°ç‰ˆ                     |
| **guestbook** | latest     | 2025-10-28 | æœ€æ–°ç‰ˆã‚¨ã‚¤ãƒªã‚¢ã‚¹              |
| **guestbook** | f137a12... | 2025-10-29 | CI/CD è‡ªå‹•ãƒ“ãƒ«ãƒ‰ (Commit SHA) |

### ACR æ“ä½œã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ­ã‚°ã‚¤ãƒ³
az acr login --name acrwizdev

# ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§
az acr repository list --name acrwizdev

# ã‚¿ã‚°ä¸€è¦§
az acr repository show-tags --name acrwizdev --repository guestbook

# ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
az acr build --registry acrwizdev --image guestbook:v5 .
```

### AKS ã¨ã®çµ±åˆ

```bash
# ACRã‚’AKSã«ã‚¢ã‚¿ãƒƒãƒ (æ—¢ã«è¨­å®šæ¸ˆã¿)
az aks update \
  --resource-group rg-wiz-exercise-1 \
  --name aks-wiz-dev \
  --attach-acr acrwizdev
```

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ     | æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯              | ãƒãƒ¼ã‚¸ãƒ§ãƒ³  |
| ------------------ | ------------------------- | ----------- |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | EJS (Embedded JavaScript) | 3.1.9       |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**   | Node.js + Express         | 18 / 4.18.2 |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**   | MongoDB                   | 4.4         |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**   | Vanilla CSS               | -           |

### ä¾å­˜é–¢ä¿‚ (package.json)

```json
{
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^7.6.3",
    "body-parser": "^1.20.2",
    "ejs": "^3.1.9"
  }
}
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

1. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿**: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›
2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§**: MongoDB ã‹ã‚‰å–å¾—ã—ã¦è¡¨ç¤º
3. **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯**: `/health` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
4. **Wiz ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º**: `/wizfile` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (ãƒ‡ãƒ¢ç”¨)

### ç’°å¢ƒå¤‰æ•°

```bash
PORT=3000
MONGO_URI=mongodb://10.0.2.4:27017/guestbook
```

### Docker ã‚¤ãƒ¡ãƒ¼ã‚¸æ§‹æˆ

**Dockerfile**:

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY wizexercise.txt /app/wizexercise.txt
COPY package*.json ./
RUN npm install --omit=dev
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

### æ„å›³çš„ãªè„†å¼±æ€§ (ãƒ‡ãƒ¢ç”¨)

- âš ï¸ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ç®¡ç†è€…æ¨©é™ã®ä»˜ä¸ (RBAC)
- âš ï¸ ç’°å¢ƒå¤‰æ•°ã«ç›´æ¥æ¥ç¶šæ–‡å­—åˆ—ã‚’è¨˜è¼‰

---

## CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

#### 1. ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤ (`infra-deploy.yml`)

**ãƒˆãƒªã‚¬ãƒ¼**:

- `infra/**` ã®å¤‰æ›´
- æ‰‹å‹•å®Ÿè¡Œ (workflow_dispatch)

**ã‚¸ãƒ§ãƒ–æ§‹æˆ**:

1. **Scan IaC for Security Issues**

   - Wiz CLI ã«ã‚ˆã‚‹ Bicep ã‚¹ã‚­ãƒ£ãƒ³
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã®æ¤œå‡º

2. **Deploy Azure Infrastructure**
   - Bicep ã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«: `parameters.json`
   - å‡ºåŠ›: ã‚¤ãƒ³ãƒ•ãƒ©æƒ…å ±ã‚’ Artifact ã«ä¿å­˜

**ä¸»è¦ãƒªã‚½ãƒ¼ã‚¹**:

- AKS ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼
- MongoDB VM
- Virtual Network
- Storage Account
- Log Analytics

#### 2. ã‚¢ãƒ—ãƒªãƒ‡ãƒ—ãƒ­ã‚¤ (`app-deploy.yml`)

**ãƒˆãƒªã‚¬ãƒ¼**:

- `app/**` ã®å¤‰æ›´
- æ‰‹å‹•å®Ÿè¡Œ (workflow_dispatch)

**ã‚¸ãƒ§ãƒ–æ§‹æˆ**:

1. **Scan Container Image**

   - Trivy ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‚¹ã‚­ãƒ£ãƒ³
   - è„†å¼±æ€§ãƒ¬ãƒãƒ¼ãƒˆ (SARIF å½¢å¼)

2. **Build and Push to ACR**

   - Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ (Commit SHA ã‚¿ã‚°)
   - ACR ã¸ãƒ—ãƒƒã‚·ãƒ¥
   - `latest` ã‚¿ã‚°ã‚‚åŒæ™‚ä½œæˆ

3. **Deploy to AKS**
   - Kubernetes ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆæ›´æ–°
   - å‹•çš„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¿ã‚°ã®é©ç”¨
   - ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

### ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œå±¥æ­´

| ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼                 | æœ€çµ‚å®Ÿè¡Œ   | çŠ¶æ…‹       | å®Ÿè¡Œæ™‚é–“ |
| ---------------------------- | ---------- | ---------- | -------- |
| Deploy Infrastructure        | 2025-10-28 | âœ… Success | 3m 29s   |
| Build and Deploy Application | 2025-10-29 | âœ… Success | 4m 46s   |

### GitHub Secrets

| ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆå        | ç”¨é€”                           |
| --------------------- | ------------------------------ |
| **AZURE_CREDENTIALS** | Azure Service Principal (JSON) |

**è¨­å®šå†…å®¹**:

```json
{
  "clientId": "<client-id>",
  "clientSecret": "<client-secret>",
  "subscriptionId": "832c4080-181c-476b-9db0-b3ce9596d40a",
  "tenantId": "04879edd-d806-4f5d-86b8-d3a171c883fa"
}
```

### è‡ªå‹•åŒ–ãƒ•ãƒ­ãƒ¼

```
ã‚³ãƒ¼ãƒ‰å¤‰æ›´ (app/ ã¾ãŸã¯ infra/)
    â†“
Git Push to main
    â†“
GitHub Actions è‡ªå‹•ãƒˆãƒªã‚¬ãƒ¼
    â†“
ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ (Wiz / Trivy)
    â†“
ãƒ“ãƒ«ãƒ‰ & ãƒ†ã‚¹ãƒˆ
    â†“
Azure ãƒ‡ãƒ—ãƒ­ã‚¤
    â†“
æ¤œè¨¼ & é€šçŸ¥
```

---

## ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±

### Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

| é …ç›®           | å€¤                       |
| -------------- | ------------------------ |
| **URL**        | http://20.18.117.80      |
| **ãƒ—ãƒ­ãƒˆã‚³ãƒ«** | HTTP                     |
| **èªè¨¼**       | ãªã—                     |
| **ãƒãƒ¼ãƒˆ**     | 80 (Ingress), 3000 (Pod) |

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

- `/` - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (æ²ç¤ºæ¿)
- `/post` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿ (POST)
- `/health` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `/wizfile` - Wiz ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º (ãƒ‡ãƒ¢ç”¨)

### ç®¡ç†ã‚¢ã‚¯ã‚»ã‚¹

#### Azure ãƒãƒ¼ã‚¿ãƒ«

- URL: https://portal.azure.com
- ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—: `rg-wiz-exercise-1`

#### AKS ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼

```bash
# kubectl ã‚¢ã‚¯ã‚»ã‚¹è¨­å®š
az aks get-credentials \
  --resource-group rg-wiz-exercise-1 \
  --name aks-wiz-dev \
  --overwrite-existing

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
kubectl proxy
# http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
```

#### MongoDB VM (SSH)

```bash
ssh azureuser@172.192.25.0
# âš ï¸ Vulnerable: ãƒ‘ãƒ–ãƒªãƒƒã‚¯SSHã‚¢ã‚¯ã‚»ã‚¹
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### å®Ÿè£…æ¸ˆã¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

#### 1. äºˆé˜²çš„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

- âœ… **Network Security Groups (NSG)**: MongoDB ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- âœ… **Private Network**: AKS ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ
- âœ… **ACR çµ±åˆ**: Managed Identity ã«ã‚ˆã‚‹èªè¨¼
- âœ… **MongoDB èªè¨¼**: èªè¨¼æœ‰åŠ¹åŒ–

#### 2. æ¤œçŸ¥çš„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

- âœ… **Log Analytics**: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç›£è¦–
- âœ… **Container Insights**: ã‚³ãƒ³ãƒ†ãƒŠãƒ¡ãƒˆãƒªã‚¯ã‚¹
- âœ… **Activity Logs**: Azure æ“ä½œãƒ­ã‚°

#### 3. CI/CD ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- âœ… **Wiz CLI**: IaC ã‚¹ã‚­ãƒ£ãƒ³ (Bicep)
- âœ… **Trivy**: ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¹ã‚­ãƒ£ãƒ³
- âœ… **SARIF Upload**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆ

### æ„å›³çš„ãªè„†å¼±æ€§ (ãƒ‡ãƒ¢ç”¨)

ä»¥ä¸‹ã¯**Wiz èª²é¡Œè¦ä»¶**ã«å¾“ã£ãŸæ„å›³çš„ãªè„†å¼±æ€§è¨­å®šã§ã™:

#### ğŸ”´ Critical

1. **MongoDB VM - ãƒ‘ãƒ–ãƒªãƒƒã‚¯ SSH ã‚¢ã‚¯ã‚»ã‚¹**

   - ãƒãƒ¼ãƒˆ 22 ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«å…¬é–‹
   - NSG ãƒ«ãƒ¼ãƒ«ã§ `Source: *` ã‚’è¨±å¯

2. **Storage Account - Public Access**

   - MongoDB ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå…¬é–‹é–²è¦§å¯èƒ½
   - å…¬é–‹ãƒªã‚¹ãƒˆå¯èƒ½

3. **éå‰°ãªã‚¯ãƒ©ã‚¦ãƒ‰æ¨©é™**
   - VM ã«å¯¾ã—ã¦ VM ä½œæˆæ¨©é™ã‚’ä»˜ä¸
   - æœ€å°æ¨©é™ã®åŸå‰‡ã«é•å

#### ğŸŸ¡ High

4. **å¤ã„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒãƒ¼ã‚¸ãƒ§ãƒ³**

   - MongoDB 4.4 (1 å¹´ä»¥ä¸Šå¤ã„)
   - Ubuntu 20.04 LTS (1 å¹´ä»¥ä¸Šå¤ã„)

5. **Kubernetes - éå‰°ãª RBAC æ¨©é™**
   - ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠã«ã‚¯ãƒ©ã‚¹ã‚¿ç®¡ç†è€…æ¨©é™
   - `rbac-vulnerable.yaml` ã§è¨­å®š

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³çµæœ

#### Wiz CLI (IaC)

- ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡: Bicep ãƒ•ã‚¡ã‚¤ãƒ«
- æ¤œå‡º: è¨­è¨ˆä¸Šã®è„†å¼±æ€§
- ãƒ¬ãƒãƒ¼ãƒˆ: GitHub Actions Annotations

#### Trivy (ã‚³ãƒ³ãƒ†ãƒŠ)

- ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡: Docker ã‚¤ãƒ¡ãƒ¼ã‚¸
- æ¤œå‡º: ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§
- é‡è¦åº¦: CRITICAL, HIGH
- ãƒ¬ãƒãƒ¼ãƒˆ: SARIF å½¢å¼ã§ GitHub Security

---

## ç¢ºèªã‚³ãƒãƒ³ãƒ‰é›†

### Azure ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª

```bash
# ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç¢ºèª
az account show

# ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ç¢ºèª
az group show --name rg-wiz-exercise-1

# å…¨ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§
az resource list --resource-group rg-wiz-exercise-1 --output table

# AKSè©³ç´°
az aks show --resource-group rg-wiz-exercise-1 --name aks-wiz-dev

# VMè©³ç´°
az vm show --resource-group rg-wiz-exercise-1 --name vm-mongo-dev

# ACRè©³ç´°
az acr show --name acrwizdev
```

### Kubernetes ç¢ºèª

```bash
# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ¥ç¶š
az aks get-credentials --resource-group rg-wiz-exercise-1 --name aks-wiz-dev

# ãƒãƒ¼ãƒ‰ç¢ºèª
kubectl get nodes -o wide

# Podç¢ºèª
kubectl get pods --all-namespaces

# Serviceç¢ºèª
kubectl get svc --all-namespaces

# Ingressç¢ºèª
kubectl get ingress

# ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
kubectl top nodes
kubectl top pods
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª

```bash
# ã‚¢ãƒ—ãƒªPodç¢ºèª
kubectl get pods -l app=guestbook

# ãƒ­ã‚°ç¢ºèª
kubectl logs -l app=guestbook --tail=100

# Podè©³ç´°
kubectl describe pod -l app=guestbook

# ã‚¢ãƒ—ãƒªå‹•ä½œç¢ºèª
curl http://20.18.117.80/health
```

### MongoDB ç¢ºèª

```bash
# VMæ¥ç¶š
ssh azureuser@172.192.25.0

# MongoDBçŠ¶æ…‹
sudo systemctl status mongod

# ãƒ­ã‚°ç¢ºèª
sudo tail -f /var/log/mongodb/mongod.log

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª
mongo --host localhost --port 27017
> show dbs
> use guestbook
> db.messages.find()
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. Pod ãŒèµ·å‹•ã—ãªã„

```bash
# PodçŠ¶æ…‹ç¢ºèª
kubectl get pods -l app=guestbook

# è©³ç´°ãƒ­ã‚°
kubectl describe pod <pod-name>
kubectl logs <pod-name>

# ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª
kubectl get events --sort-by='.lastTimestamp'
```

#### 2. ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

```bash
# Ingressç¢ºèª
kubectl get ingress
kubectl describe ingress guestbook-ingress

# Serviceç¢ºèª
kubectl get svc
kubectl get endpoints

# LoadBalancer IPç¢ºèª
kubectl get svc -n ingress-nginx ingress-nginx-controller
```

#### 3. MongoDB ã«æ¥ç¶šã§ããªã„

```bash
# VMç¢ºèª
az vm show --resource-group rg-wiz-exercise-1 --name vm-mongo-dev
az vm get-instance-view --resource-group rg-wiz-exercise-1 --name vm-mongo-dev

# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¢ºèª
az network nsg rule list --resource-group rg-wiz-exercise-1 --nsg-name vm-mongo-dev-nsg

# Podå†…ã‹ã‚‰æ¥ç¶šãƒ†ã‚¹ãƒˆ
kubectl exec -it <pod-name> -- curl -v telnet://10.0.2.4:27017
```

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [AZURE_SETUP_INFO.md](./AZURE_SETUP_INFO.md) - Azure åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æƒ…å ±
- [../Docs_work_history/](../Docs_work_history/) - ä½œæ¥­å±¥æ­´
- [../Docs_issue_point/](../Docs_issue_point/) - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- [../README.md](../README.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

---

**æœ€çµ‚æ›´æ–°**: 2025 å¹´ 10 æœˆ 29 æ—¥  
**ç®¡ç†è€…**: CICD-AKS-Technical Exercise Team  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Production Ready
